<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Sachin Sunkle">
    <meta name="description" content="My Technical Blog">
    <meta name="keywords" content="blog,developer,personal,golang,dotnetcore,databases,architecture,c#,.net core, Vuejs, Quasar, Oracle">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Using .NET standard Assembly in .NET core and .NET Framework"/>
<meta name="twitter:description" content="Using .NET standard Assembly in both .NET core and .NET Framework Background One of the key project(s) at my current organization is developed on .NET 4.6.1. It is developed as Modular Monolith. As part of it&rsquo;s functionality, it supports different channels like Mobiles, Terminals and Web. For the Web channel, there was need to develop a Web application with,
 High availability Lightweight, High throughput (Need to support few thousand(s) active users)  Accordingly, we have been exploring developing this Web Application in ."/>

    <meta property="og:title" content="Using .NET standard Assembly in .NET core and .NET Framework" />
<meta property="og:description" content="Using .NET standard Assembly in both .NET core and .NET Framework Background One of the key project(s) at my current organization is developed on .NET 4.6.1. It is developed as Modular Monolith. As part of it&rsquo;s functionality, it supports different channels like Mobiles, Terminals and Web. For the Web channel, there was need to develop a Web application with,
 High availability Lightweight, High throughput (Need to support few thousand(s) active users)  Accordingly, we have been exploring developing this Web Application in ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sachinsu.github.io/posts/dotnetstandard/" />
<meta property="article:published_time" content="2020-02-07T10:25:04+05:30" />
<meta property="article:modified_time" content="2020-02-07T10:25:04+05:30" />


    
      <base href="https://sachinsu.github.io/posts/dotnetstandard/">
    
    <title>
  Using .NET standard Assembly in .NET core and .NET Framework · Sachin Sunkle
</title>

    
      <link rel="canonical" href="https://sachinsu.github.io/posts/dotnetstandard/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://sachinsu.github.io/css/coder.min.624134b411585efffadab6a91e7d0383f0d4e22ad49de3690eccbc96f528e670.css" integrity="sha256-YkE0tBFYXv/62rapHn0Dg/DU4irUneNpDsy8lvUo5nA=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="https://sachinsu.github.io/css/coder-dark.min.83a2010dac9f59f943b3004cd6c4f230507ad036da635d3621401d42ec4e2835.css" integrity="sha256-g6IBDayfWflDswBM1sTyMFB60DbaY102IUAdQuxOKDU=" crossorigin="anonymous" media="screen" />
      
    

    

    

    

    <link rel="icon" type="image/png" href="https://sachinsu.github.io/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://sachinsu.github.io/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.64.0" />
  </head>

  
  
    
  
  <body class="colorscheme-auto">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://sachinsu.github.io/">
      Sachin Sunkle
    </a>
    
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://sachinsu.github.io/about/">About</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://sachinsu.github.io/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://sachinsu.github.io/projects/">Projects</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://gist.github.com/sachinsu">Gists</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://sachinsu.github.io/links/home">Useful Links</a>
          </li>
        
      
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">Using .NET standard Assembly in .NET core and .NET Framework</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2020-02-07T10:25:04&#43;05:30'>
                February 7, 2020
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              3-minute read
            </span>
          </div>
          
          
        </div>
      </header>

      <div>
        
        <h1 id="using-net-standard-assembly-in-both-net-core-and-net-framework">Using .NET standard Assembly in both .NET core and .NET Framework</h1>
<h2 id="background">Background</h2>
<p>One of the key project(s) at my current organization is developed on .NET 4.6.1. It is developed as <a href="https://www.youtube.com/watch?v=5OjqD-ow8GE">Modular Monolith</a>. As part of it&rsquo;s functionality, it supports different channels like Mobiles, Terminals and Web. For the <em>Web</em> channel, there was need to develop a Web application with,</p>
<ul>
<li>High availability</li>
<li>Lightweight, High throughput (Need to support few thousand(s) active users)</li>
</ul>
<p>Accordingly, we have been exploring developing this Web Application in .NET core 3.1. However, it also means that we will have to use class libraries, targeted at .NET framework 4.6.1, in .NET core and vice-versa. How can this be done?</p>
<p><strong>.NET Standard to the rescue !!</strong></p>
<p><a href="https://docs.microsoft.com/en-us/dotnet/standard/net-standard">.Net Standard</a> is a standard that enabled development of portable libraries usable across .NET versions.</p>
<p>Below is approach adopted to create usable libraries across .NET framework &amp; .NET Core.</p>
<ul>
<li>
<p>.NET &amp; IDE versions used are,</p>
<ul>
<li>.Net Framework 4.6.1</li>
<li>.Net core 3.1</li>
<li>Visual Studio 2015 - for .NET Framework 4.6.1 development</li>
<li>Visual Studio Code - For .NET core development</li>
</ul>
</li>
<li>
<p>Step 1 -</p>
<ul>
<li>Create a library that targets .NET Standard.
<ul>
<li>
<p>Refer to Table on <a href="https://docs.microsoft.com/en-us/dotnet/standard/net-standard#net-implementation-support">Implementation Support</a> to decide on version that can be targetted at. In my case, it was 2.0 (Remember that higher the version, more APIs will be available to use). Do check <a href="https://docs.microsoft.com/en-us/dotnet/api/">.NET API browser</a>, which lists API available with each version.</p>
</li>
<li>
<p>Using .NET core, use below command,
<code>dotnet new classlib &lt;name&gt;</code></p>
<p>Note that, by default csproj file generated targets .NET Standard, but do confirm by checking in <code>&lt;name&gt;.csproj</code> file, It should have entry like,</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">&lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netstandard2.0&lt;/TargetFramework&gt;
&lt;/PropertyGroup&gt;
</code></pre></div><p>Change the version of .NET Standard if required.</p>
</li>
<li>
<p>Add necessary code to the library and build it using,
<code>dotnet build</code></p>
</li>
<li>
<p>Create a Nuget Package using,
<code>dotnet pack</code>
This will generate <code>&lt;name&gt;1.0.0.nupkg</code> package in bin\debug folder (assuming that you are using Debug mode)</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Step 2 -</p>
<ul>
<li>
<p>Lets consume this library from console Application, using .NET Framework 4.6.1, in Visual Studio 2015.</p>
<ul>
<li>
<p>Create New Console Application and ensure that it is targeted at .NET Framework 4.6.1 or Higher.</p>
</li>
<li>
<p>Before consuming .NET standard library, few steps are needed since VS 2015 only has legacy support for consuming .NET core artifacts also it does not have latest version of Nuget, so lets do below,</p>
<ul>
<li>Install NuGet 3.6.0 or higher for VS 2015 from <a href="https://www.nuget.org/downloads">NuGet&rsquo;s download site</a></li>
<li>Install the &ldquo;.NET Standard Support for Visual Studio 2015&rdquo; from <a href="https://www.microsoft.com/net/download/core">here</a></li>
<li>Open the csproj file in Text Editor and add  <code>&lt;ImplicitlyExpandDesignTimeFacades&gt;</code> tag as shown in below example,</li>
</ul>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
&lt;Project ToolsVersion=&#34;12.0&#34; DefaultTargets=&#34;Build&#34; xmlns=&#34;http://schemas.microsoft.com/developer/msbuild/2003&#34;&gt;
&lt;PropertyGroup&gt;
    &lt;Configuration Condition=&#34; &#39;$(Configuration)&#39; == &#39;&#39; &#34;&gt;Debug&lt;/Configuration&gt;
    &lt;Platform Condition=&#34; &#39;$(Platform)&#39; == &#39;&#39; &#34;&gt;AnyCPU&lt;/Platform&gt;
    &lt;ProjectGuid&gt;{75678902-8224-4222-BB33-756784B2FA29}&lt;/ProjectGuid&gt;
    &lt;OutputType&gt;Library&lt;/OutputType&gt;
    &lt;RootNamespace&gt;FooBar&lt;/RootNamespace&gt;
    &lt;AssemblyName&gt;FooBar&lt;/AssemblyName&gt;
    &lt;TargetFrameworkVersion&gt;v4.6.1&lt;/TargetFrameworkVersion&gt;
    ...
    &lt;ImplicitlyExpandDesignTimeFacades&gt;false&lt;/ImplicitlyExpandDesignTimeFacades&gt;
&lt;/PropertyGroup&gt;
</code></pre></div><p>Post update to file, VS 2015 will prompt to reload the project.</p>
<p>Now we are set to consume .NET standard library, authored in .NET Core, in this project.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Step 3 -</p>
<ul>
<li>Within VS 2015, Goto Nuget Console and install the package created earlier. This <a href="https://docs.microsoft.com/en-us/nuget/consume-packages/install-use-packages-visual-studio">link</a> has steps to consume local nuget package(s).</li>
</ul>
</li>
</ul>
<p>Happy Coding !!</p>
<hr>
<script src="https://utteranc.es/client.js" repo="sachinsu.github.io" issue-term="title" label="blogcomment"
    theme="github-light" crossorigin="anonymous" async></script>

      </div>


      <footer>
        


        
        
        
      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
    
      
        © 2019 - 2020
      
       Sachin Sunkle 
    
    
       · 
      Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
