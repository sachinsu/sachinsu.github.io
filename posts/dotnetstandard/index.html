<!doctype html><html class=no-js lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>Using .NET standard Assembly in .NET core and .NET Framework - Learnings in IT</title>
<script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script>
<meta name=description content>
<meta property="og:title" content="Using .NET standard Assembly in .NET core and .NET Framework">
<meta property="og:description" content="Background One of the key project(s) at my current organization is developed on .NET 4.6.1. It is developed as Modular Monolith. As part of it&rsquo;s functionality, it supports different channels like Mobiles, Terminals and Web. For the Web channel, there was need to develop a Web application with,
 High availability Lightweight, High throughput (Need to support few thousand(s) active users)  Accordingly, we have been exploring developing this Web Application in .">
<meta property="og:type" content="article">
<meta property="og:url" content="https://sachinsu.github.io/posts/dotnetstandard/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-02-07T10:25:04+05:30">
<meta property="article:modified_time" content="2020-02-07T10:25:04+05:30">
<meta itemprop=name content="Using .NET standard Assembly in .NET core and .NET Framework">
<meta itemprop=description content="Background One of the key project(s) at my current organization is developed on .NET 4.6.1. It is developed as Modular Monolith. As part of it&rsquo;s functionality, it supports different channels like Mobiles, Terminals and Web. For the Web channel, there was need to develop a Web application with,
 High availability Lightweight, High throughput (Need to support few thousand(s) active users)  Accordingly, we have been exploring developing this Web Application in ."><meta itemprop=datePublished content="2020-02-07T10:25:04+05:30">
<meta itemprop=dateModified content="2020-02-07T10:25:04+05:30">
<meta itemprop=wordCount content="487">
<meta itemprop=keywords content>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Using .NET standard Assembly in .NET core and .NET Framework">
<meta name=twitter:description content="Background One of the key project(s) at my current organization is developed on .NET 4.6.1. It is developed as Modular Monolith. As part of it&rsquo;s functionality, it supports different channels like Mobiles, Terminals and Web. For the Web channel, there was need to develop a Web application with,
 High availability Lightweight, High throughput (Need to support few thousand(s) active users)  Accordingly, we have been exploring developing this Web Application in .">
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=dns-prefetch href=//fonts.googleapis.com>
<link rel=dns-prefetch href=//fonts.gstatic.com>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
<link rel=stylesheet href=/css/style.css>
<link rel="shortcut icon" href=/favicon.ico>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-169012216-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body class=body>
<div class="container container--outer">
<header class=header>
<div class="container header__container">
<div class=logo>
<a class=logo__link href=/ title="Learnings in IT" rel=home>
<div class="logo__item logo__text">
<div class=logo__title>Learnings in IT</div>
<div class=logo__tagline>A Simple Technical Blog</div>
</div>
</a>
</div>
<nav class=menu>
<button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span>
</button>
<ul class=menu__list>
<li class=menu__item>
<a class=menu__link href=/about/>
<span class=menu__text>About</span>
</a>
</li>
<li class=menu__item>
<a class=menu__link href=/posts/>
<span class=menu__text>Blog</span>
</a>
</li>
<li class=menu__item>
<a class=menu__link href=/projects/>
<span class=menu__text>Projects</span>
</a>
</li>
<li class=menu__item>
<a class=menu__link href=https://gist.github.com/sachinsu>
<span class=menu__text>Gists</span>
</a>
</li>
<li class=menu__item>
<a class=menu__link href=/links/home>
<span class=menu__text>Useful Links</span>
</a>
</li>
</ul>
</nav>
</div>
</header>
<div class="wrapper flex">
<div class=primary>
<main class=main role=main>
<article class=post>
<header class=post__header>
<h1 class=post__title>Using .NET standard Assembly in .NET core and .NET Framework</h1>
<div class="post__meta meta"><div class="meta__item-author meta__item">
<svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2.0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class=meta__text>Sachin Sunkle</span>
</div>
<div class="meta__item-datetime meta__item">
<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2020-02-07T10:25:04+05:30>Feb 7 2020</time></div></div>
</header>
<div class="post__toc toc">
<div class=toc__title>Page content</div>
<div class=toc__menu>
<nav id=TableOfContents>
<ul>
<li><a href=#background>Background</a></li>
</ul>
</nav>
</div>
</div><div class="content post__content clearfix">
<h2 id=background>Background</h2>
<p>One of the key project(s) at my current organization is developed on .NET 4.6.1. It is developed as <a href="https://www.youtube.com/watch?v=5OjqD-ow8GE" target=_blank rel="noopener noreferrer">Modular Monolith</a>. As part of it&rsquo;s functionality, it supports different channels like Mobiles, Terminals and Web. For the <em>Web</em> channel, there was need to develop a Web application with,</p>
<ul>
<li>High availability</li>
<li>Lightweight, High throughput (Need to support few thousand(s) active users)</li>
</ul>
<p>Accordingly, we have been exploring developing this Web Application in .NET core 3.1. However, it also means that we will have to use class libraries, targeted at .NET framework 4.6.1, in .NET core and vice-versa. How can this be done?</p>
<p><strong>.NET Standard to the rescue !!</strong></p>
<p><a href=https://docs.microsoft.com/en-us/dotnet/standard/net-standard target=_blank rel="noopener noreferrer">.Net Standard</a> is a standard that enabled development of portable libraries usable across .NET versions.</p>
<p>Below is approach adopted to create usable libraries across .NET framework & .NET Core.</p>
<ul>
<li>
<p>.NET & IDE versions used are,</p>
<ul>
<li>.Net Framework 4.6.1</li>
<li>.Net core 3.1</li>
<li>Visual Studio 2015 - for .NET Framework 4.6.1 development</li>
<li>Visual Studio Code - For .NET core development</li>
</ul>
</li>
<li>
<p>Step 1 -</p>
<ul>
<li>Create a library that targets .NET Standard.
<ul>
<li>
<p>Refer to Table on <a href=https://docs.microsoft.com/en-us/dotnet/standard/net-standard#net-implementation-support target=_blank rel="noopener noreferrer">Implementation Support</a> to decide on version that can be targetted at. In my case, it was 2.0 (Remember that higher the version, more APIs will be available to use). Do check <a href=https://docs.microsoft.com/en-us/dotnet/api/ target=_blank rel="noopener noreferrer">.NET API browser</a>, which lists API available with each version.</p>
</li>
<li>
<p>Using .NET core, use below command,
<code>dotnet new classlib &lt;name></code></p>
<p>Note that, by default csproj file generated targets .NET Standard, but do confirm by checking in <code>&lt;name>.csproj</code> file, It should have entry like,</p>
<pre tabindex=0><code>&lt;PropertyGroup&gt;
    &lt;TargetFramework&gt;netstandard2.0&lt;/TargetFramework&gt;
&lt;/PropertyGroup&gt;
</code></pre><p>Change the version of .NET Standard if required.</p>
</li>
<li>
<p>Add necessary code to the library and build it using,
<code>dotnet build</code></p>
</li>
<li>
<p>Create a Nuget Package using,
<code>dotnet pack</code>
This will generate <code>&lt;name>1.0.0.nupkg</code> package in bin\debug folder (assuming that you are using Debug mode)</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Step 2 -</p>
<ul>
<li>
<p>Lets consume this library from console Application, using .NET Framework 4.6.1, in Visual Studio 2015.</p>
<ul>
<li>
<p>Create New Console Application and ensure that it is targeted at .NET Framework 4.6.1 or Higher.</p>
</li>
<li>
<p>Before consuming .NET standard library, few steps are needed since VS 2015 only has legacy support for consuming .NET core artifacts also it does not have latest version of Nuget, so lets do below,</p>
<ul>
<li>Install NuGet 3.6.0 or higher for VS 2015 from <a href=https://www.nuget.org/downloads target=_blank rel="noopener noreferrer">NuGet&amp;amp;rsquo;s download site</a></li>
<li>Install the &ldquo;.NET Standard Support for Visual Studio 2015&rdquo; from <a href=https://www.microsoft.com/net/download/core target=_blank rel="noopener noreferrer">here</a></li>
<li>Open the csproj file in Text Editor and add <code>&lt;ImplicitlyExpandDesignTimeFacades></code> tag as shown in below example,</li>
</ul>
<pre tabindex=0><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;Project ToolsVersion=&quot;12.0&quot; DefaultTargets=&quot;Build&quot; xmlns=&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot;&gt;
&lt;PropertyGroup&gt;
    &lt;Configuration Condition=&quot; '$(Configuration)' == '' &quot;&gt;Debug&lt;/Configuration&gt;
    &lt;Platform Condition=&quot; '$(Platform)' == '' &quot;&gt;AnyCPU&lt;/Platform&gt;
    &lt;ProjectGuid&gt;{75678902-8224-4222-BB33-756784B2FA29}&lt;/ProjectGuid&gt;
    &lt;OutputType&gt;Library&lt;/OutputType&gt;
    &lt;RootNamespace&gt;FooBar&lt;/RootNamespace&gt;
    &lt;AssemblyName&gt;FooBar&lt;/AssemblyName&gt;
    &lt;TargetFrameworkVersion&gt;v4.6.1&lt;/TargetFrameworkVersion&gt;
    ...
    &lt;ImplicitlyExpandDesignTimeFacades&gt;false&lt;/ImplicitlyExpandDesignTimeFacades&gt;
&lt;/PropertyGroup&gt;
</code></pre><p>Post update to file, VS 2015 will prompt to reload the project.</p>
<p>Now we are set to consume .NET standard library, authored in .NET Core, in this project.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Step 3 -</p>
<ul>
<li>Within VS 2015, Goto Nuget Console and install the package created earlier. This <a href=https://docs.microsoft.com/en-us/nuget/consume-packages/install-use-packages-visual-studio target=_blank rel="noopener noreferrer">link</a> has steps to consume local nuget package(s).</li>
</ul>
</li>
</ul>
<p>Happy Coding !!</p>
<hr>
<script src=https://utteranc.es/client.js repo=sachinsu/sachinsu.github.io issue-term=title label=blogcomment theme=github-light crossorigin=anonymous async></script>
</div>
</article>
</main>
<div class="authorbox clearfix">
<div class=authorbox__header>
<span class=authorbox__name>About Sachin Sunkle</span>
</div>
<div class=authorbox__description>
A Coder in IT
</div>
</div>
<nav class="pager flex">
<div class="pager__item pager__item--prev">
<a class=pager__link href=/posts/dddnotes/ rel=prev>
<span class=pager__subtitle>«&#8201;Previous</span>
<p class=pager__title></p>
</a>
</div>
<div class="pager__item pager__item--next">
<a class=pager__link href=/posts/channelsforproducerconsumer/ rel=next>
<span class=pager__subtitle>Next&#8201;»</span>
<p class=pager__title>Using Channels for High performance Producer consumer implementation</p>
</a>
</div>
</nav>
</div>
</div>
<footer class=footer>
<div class="container footer__container flex">
<div class=footer__copyright>
&copy; 2021 Sachin Sunkle.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span>
</div>
</div>
</footer>
</div>
<script async defer src=/js/menu.js></script>
</body>
</html>