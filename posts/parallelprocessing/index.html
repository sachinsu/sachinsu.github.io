<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Using Asynchronous programming to manage parallel processing - Learnings in IT</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:url" content="https://sachinsu.github.io/posts/parallelprocessing/"><meta property="og:site_name" content="Learnings in IT"><meta property="og:title" content="Using Asynchronous programming to manage parallel processing "><meta property="og:description" content="Background There was a requirement to perform series of tasks, involving generation of output files, such that the required throughput is achieved. These tasks involve database read operation, external API invocation and file i/o. Generally, benchmarking showed that executing them in sequential way was not helpful. What if asynchronous programming be used to perform this task.
So Lets Start.
Approach Lets assume that this typical use case requires,
fetching data from database for the purpose of merging placeholders in a Template and perform mail merge"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-07-30T10:25:04+05:30"><meta property="article:modified_time" content="2024-07-30T10:25:04+05:30"><meta itemprop=name content="Using Asynchronous programming to manage parallel processing "><meta itemprop=description content="Background There was a requirement to perform series of tasks, involving generation of output files, such that the required throughput is achieved. These tasks involve database read operation, external API invocation and file i/o. Generally, benchmarking showed that executing them in sequential way was not helpful. What if asynchronous programming be used to perform this task.
So Lets Start.
Approach Lets assume that this typical use case requires,
fetching data from database for the purpose of merging placeholders in a Template and perform mail merge"><meta itemprop=datePublished content="2024-07-30T10:25:04+05:30"><meta itemprop=dateModified content="2024-07-30T10:25:04+05:30"><meta itemprop=wordCount content="297"><meta name=twitter:card content="summary"><meta name=twitter:title content="Using Asynchronous programming to manage parallel processing "><meta name=twitter:description content="Background There was a requirement to perform series of tasks, involving generation of output files, such that the required throughput is achieved. These tasks involve database read operation, external API invocation and file i/o. Generally, benchmarking showed that executing them in sequential way was not helpful. What if asynchronous programming be used to perform this task.
So Lets Start.
Approach Lets assume that this typical use case requires,
fetching data from database for the purpose of merging placeholders in a Template and perform mail merge"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Learnings in IT" rel=home><div class="logo__item logo__text"><div class=logo__title>Learnings in IT</div><div class=logo__tagline>A Simple Technical Blog</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>About</span></a></li><li class=menu__item><a class=menu__link href=/posts/><span class=menu__text>Blog</span></a></li><li class=menu__item><a class=menu__link href=/projects/><span class=menu__text>Projects</span></a></li><li class=menu__item><a class=menu__link href=https://gist.github.com/sachinsu><span class=menu__text>Gists</span></a></li><li class=menu__item><a class=menu__link href=/links/home><span class=menu__text>Useful Links</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Using Asynchronous programming to manage parallel processing</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2024-07-30T10:25:04+05:30>Jul 30 2024</time></div></div></header><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#approach>Approach</a></li></ul></nav></div></div><div class="content post__content clearfix"><h2 id=background>Background</h2><p>There was a requirement to perform series of tasks, involving generation of output files, such that the required throughput is achieved. These tasks involve database read operation, external API invocation and file i/o. Generally, benchmarking showed that executing them in sequential way was not helpful. What if asynchronous programming be used to perform this task.</p><p>So Lets Start.</p><h2 id=approach>Approach</h2><p>Lets assume that this typical use case requires,</p><ul><li><p>fetching data from database for the purpose of merging placeholders in a Template and perform mail merge</p></li><li><p>Generate PDF file from mail-merged output of last step (say HTML to PDF)</p></li><li><p>send notification to users via third party API.</p></li></ul><hr><p>The requirement is to perform these steps in such a way that 50 or more notifications (with file) are sent per minute.</p><p>For the purpose of simplicity, lets assume that,</p><ul><li>Database read operation and HTML generation basis template, takes upto 2 seconds per iteration</li><li>We will use <a href=https://www.puppeteersharp.com/ target=_blank rel="noopener noreferrer">Puppeteer Sharp</a> library for PDF Generation</li><li>External API Integration takes up to 2 seconds per call</li></ul><p>Since current approach of sequential execution is not helpful, lets try below (both the methods process 5 requests[i.e. generate 5 pdf files] per iteration),</p><ul><li>Using <a href=https://learn.microsoft.com/en-us/dotnet/csharp/asynchronous-programming/task-asynchronous-programming-model target=_blank rel="noopener noreferrer">Task asynchronous programming model</a> - This uses Task library to start tasks in parallel and subsequently process them as each completes.</li></ul><figure><img src=/images/pl-taskasync.png><figcaption><h4>Using Task Async. Library</h4></figcaption></figure><ul><li>Using <a href=https://learn.microsoft.com/en-us/dotnet/standard/parallel-programming/dataflow-task-parallel-library target=_blank rel="noopener noreferrer">Dataflow - Task Parallel Library</a> - This uses Dataflow Library to orchestrate each step in the process and use parallelism for performance.</li></ul><figure><img src=/images/pl-dataflow.png><figcaption><h4>Using DataFlow Library</h4></figcaption></figure><hr><p>Below is the Report from Benchmarkdotnet for both the approaches.</p><figure><img src=/images/pl-benchmark.png><figcaption><h4>Benchmark Results</h4></figcaption></figure><p>As one can see, using above techniques, It is straightforward to write asynchronous code that performs parallel execution and achieves better performance compared to sequential alternate approach.</p><p>References:</p><ul><li><a href=https://benchmarkdotnet.org target=_blank rel="noopener noreferrer">BenchmarkDotNet</a></li><li><a href=https://www.stevejgordon.co.uk/introduction-to-benchmarking-csharp-code-with-benchmark-dot-net target=_blank rel="noopener noreferrer">Introduction to Benchmarking C# Code with Benchmark .NET</a></li></ul><p>Happy Coding !!</p><hr><script src=https://utteranc.es/client.js repo=sachinsu/sachinsu.github.io issue-term=title label=blogcomment theme=github-light crossorigin=anonymous async></script></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/posts/ollamasemantickernel/ rel=prev><span class=pager__subtitle>Â«&#8201;Previous</span><p class=pager__title>Using local LLM with Ollama and Semantic Kernel</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Sachin Sunkle.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>