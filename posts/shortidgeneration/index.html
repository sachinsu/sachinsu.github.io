<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>URL Shortener in High Throughput Service - Learnings in IT</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="URL Shortener in High Throughput Service"><meta property="og:description" content="Background A Client has E-commerce Application consisting of services aimed at specific domains of business functionality it serves. One of these services is responsible for accepting the order, authenticating it and forwarding it for further processing in terms of inventory checks, payment and so on. For Authentication, this service sends SMS to Customer&rsquo;s Mobile number (and e-mail id) and customer is supposed to confirm this order placement by means of entering Code received in it."><meta property="og:type" content="article"><meta property="og:url" content="https://sachinsu.github.io/posts/shortidgeneration/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-15T01:00:00+05:30"><meta property="article:modified_time" content="2022-05-15T01:00:00+05:30"><meta itemprop=name content="URL Shortener in High Throughput Service"><meta itemprop=description content="Background A Client has E-commerce Application consisting of services aimed at specific domains of business functionality it serves. One of these services is responsible for accepting the order, authenticating it and forwarding it for further processing in terms of inventory checks, payment and so on. For Authentication, this service sends SMS to Customer&rsquo;s Mobile number (and e-mail id) and customer is supposed to confirm this order placement by means of entering Code received in it."><meta itemprop=datePublished content="2022-05-15T01:00:00+05:30"><meta itemprop=dateModified content="2022-05-15T01:00:00+05:30"><meta itemprop=wordCount content="390"><meta itemprop=keywords content="HTTP,Nanoid,UUID,REST,.NET,C#,Oracle,URL,Latency,SMS,"><meta name=twitter:card content="summary"><meta name=twitter:title content="URL Shortener in High Throughput Service"><meta name=twitter:description content="Background A Client has E-commerce Application consisting of services aimed at specific domains of business functionality it serves. One of these services is responsible for accepting the order, authenticating it and forwarding it for further processing in terms of inventory checks, payment and so on. For Authentication, this service sends SMS to Customer&rsquo;s Mobile number (and e-mail id) and customer is supposed to confirm this order placement by means of entering Code received in it."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-169012216-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Learnings in IT" rel=home><div class="logo__item logo__text"><div class=logo__title>Learnings in IT</div><div class=logo__tagline>A Simple Technical Blog</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>About</span></a></li><li class=menu__item><a class=menu__link href=/posts/><span class=menu__text>Blog</span></a></li><li class=menu__item><a class=menu__link href=/projects/><span class=menu__text>Projects</span></a></li><li class=menu__item><a class=menu__link href=https://gist.github.com/sachinsu><span class=menu__text>Gists</span></a></li><li class=menu__item><a class=menu__link href=/links/home><span class=menu__text>Useful Links</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>URL Shortener in High Throughput Service</h1><div class="post__meta meta"><div class="meta__item-author meta__item"><svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2.0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class=meta__text>Sachin Sunkle</span></div><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-05-15T01:00:00+05:30>May 15 2022</time></div></div></header><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#implementation-details>Implementation details</a><ul><li><a href=#useful-references>Useful References</a></li></ul></li></ul></nav></div></div><div class="content post__content clearfix"><h2 id=background>Background</h2><p>A Client has E-commerce Application consisting of services aimed at specific domains of business functionality it serves. One of these services is responsible for accepting the order, authenticating it and forwarding it for further processing in terms of inventory checks, payment and so on. For Authentication, this service sends <a href=https://en.wikipedia.org/wiki/SMS target=_blank rel="noopener noreferrer">SMS</a> to Customer&rsquo;s Mobile number (and e-mail id) and customer is supposed to confirm this order placement by means of entering Code received in it. This code is valid for a short duration.</p><p>The requirement is to add a <a href=https://en.wikipedia.org/wiki/URL target=_blank rel="noopener noreferrer">URL</a> to this SMS which customer can use to view the order and confirm it on Mobile itself.</p><p>For above, there are constraints like,</p><ul><li>Service is expected to trigger SMS, with required content like code, URL Etc., instantaneously. This is because time-bound action is expected from customer post receiving this SMS.</li><li>SMS Message size restrictions to be taken into consideration while adding URL to it (since it already has other content in it).</li></ul><h2 id=implementation-details>Implementation details</h2><p>Given the size restrictions on SMS, a URL need to be as short as possible. Hence, URL Shortener will have to be used which reduces length of overall URL. Additionally, very low latency is expected while preparing content of SMS and sending the same (by calling Telecom Service Provider&rsquo;s API) hence external services like <a href=https://bitly.com/ target=_blank rel="noopener noreferrer">Bitly</a> are most probably not useful. This is because the whole response time will then be tied to performance, up-time of this external service. Better alternative is to generate short / nano ID within Service itself. This will work assuming appropriate short domain (like t.me or youtu.be etc.) is available.</p><p>Below are the alternatives to generate short id within the Service,</p><ul><li><a href=https://github.com/ai/nanoid target=_blank rel="noopener noreferrer">Nanoid</a></li><li><a href=https://hashids.org/net/ target=_blank rel="noopener noreferrer">HashIds</a></li><li><a href=https://microsoft.github.io/makecode-csp/unit-6/day-14/base63-url-shorteners target=_blank rel="noopener noreferrer">Base62 algorithm</a></li></ul><p>One can choose any of the above considering tolerance for Collision. With Nanoid, one can check extent to which length can be reduced while avoiding collision using this <a href=https://zelark.github.io/nano-id-cc/ target=_blank rel="noopener noreferrer">Calculator</a>.</p><p>This approach helps with,</p><ul><li>Encapsulation - Keeping logic of short id generation, logging it in storage (ie. database), and responding to request for URL containing this short id within service itself.</li><li>Keep external dependencies to minimum as much as possible so as to have better control over latency/throughput and easier monitoring.</li></ul><h3 id=useful-references>Useful References</h3><ul><li><a href=https://planetscale.com/blog/why-we-chose-nanoids-for-planetscales-api target=_blank rel="noopener noreferrer">Why Nanoids by Planetscale</a></li><li><a href=https://www.kalzumeus.com/2010/04/20/building-highly-reliable-websites-for-small-companies/ target=_blank rel="noopener noreferrer">Building highly reliable Web sites</a></li><li><a href=https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF target=_blank rel="noopener noreferrer">System Designer&amp;amp;rsquo;s Interview - Insider&amp;amp;rsquo;s Guide - Has Nice chapter on URL Shorteners</a></li></ul><p>Happy Coding !!</p><hr><script src=https://utteranc.es/client.js repo=sachinsu/sachinsu.github.io issue-term=title label=blogcomment theme=github-light crossorigin=anonymous async></script></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/http/ rel=tag>HTTP</a></li><li class=tags__item><a class="tags__link btn" href=/tags/nanoid/ rel=tag>Nanoid</a></li><li class=tags__item><a class="tags__link btn" href=/tags/uuid/ rel=tag>UUID</a></li><li class=tags__item><a class="tags__link btn" href=/tags/rest/ rel=tag>REST</a></li><li class=tags__item><a class="tags__link btn" href=/tags/.net/ rel=tag>.NET</a></li><li class=tags__item><a class="tags__link btn" href=/tags/c/ rel=tag>C#</a></li><li class=tags__item><a class="tags__link btn" href=/tags/oracle/ rel=tag>Oracle</a></li><li class=tags__item><a class="tags__link btn" href=/tags/url/ rel=tag>URL</a></li><li class=tags__item><a class="tags__link btn" href=/tags/latency/ rel=tag>Latency</a></li><li class=tags__item><a class="tags__link btn" href=/tags/sms/ rel=tag>SMS</a></li></ul></div></footer></article></main><div class="authorbox clearfix"><div class=authorbox__header><span class=authorbox__name>About Sachin Sunkle</span></div><div class=authorbox__description>A Coder in IT</div></div><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/posts/is_sqlite_production_ready/ rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Can SQLite be considered for Server Applications?</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/posts/tlshandsharefailure/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Troubleshooting TLS handshake issue</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2023 Sachin Sunkle.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>