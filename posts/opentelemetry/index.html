<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Getting Started with OpenTelemetry - Learnings in IT</title>
<script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:url" content="https://sachinsu.github.io/posts/opentelemetry/"><meta property="og:site_name" content="Learnings in IT"><meta property="og:title" content="Getting Started with OpenTelemetry"><meta property="og:description" content="Background How many times have we landed up in a meeting staring at random slowness or such production issues in a distributed Application ? only to experience helplessness with limited (or often times no) visibility available about the runtime behavior of the Application. It often ends up in manually correlating whatever diagnostic data available from Application and combining it with trace/logs that are available from O/S, databases etc. and trying to figure out “Root cause” of the issue."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-07T08:25:04+05:30"><meta property="article:modified_time" content="2020-11-07T08:25:04+05:30"><meta property="article:tag" content=".Net Core"><meta property="article:tag" content=".Net Framework"><meta property="article:tag" content="OpenTelemetry"><meta property="article:tag" content="Observability"><meta property="article:tag" content="Go"><meta property="article:tag" content="Golang"><meta itemprop=name content="Getting Started with OpenTelemetry"><meta itemprop=description content="Background How many times have we landed up in a meeting staring at random slowness or such production issues in a distributed Application ? only to experience helplessness with limited (or often times no) visibility available about the runtime behavior of the Application. It often ends up in manually correlating whatever diagnostic data available from Application and combining it with trace/logs that are available from O/S, databases etc. and trying to figure out “Root cause” of the issue."><meta itemprop=datePublished content="2020-11-07T08:25:04+05:30"><meta itemprop=dateModified content="2020-11-07T08:25:04+05:30"><meta itemprop=wordCount content="1581"><meta itemprop=keywords content=".Net Core,.Net Framework,OpenTelemetry,Observability,Go,Golang"><meta name=twitter:card content="summary"><meta name=twitter:title content="Getting Started with OpenTelemetry"><meta name=twitter:description content="Background How many times have we landed up in a meeting staring at random slowness or such production issues in a distributed Application ? only to experience helplessness with limited (or often times no) visibility available about the runtime behavior of the Application. It often ends up in manually correlating whatever diagnostic data available from Application and combining it with trace/logs that are available from O/S, databases etc. and trying to figure out “Root cause” of the issue."><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Learnings in IT" rel=home><div class="logo__item logo__text"><div class=logo__title>Learnings in IT</div><div class=logo__tagline>A Simple Technical Blog</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>About</span></a></li><li class=menu__item><a class=menu__link href=/posts/><span class=menu__text>Blog</span></a></li><li class=menu__item><a class=menu__link href=/projects/><span class=menu__text>Projects</span></a></li><li class=menu__item><a class=menu__link href=https://gist.github.com/sachinsu><span class=menu__text>Gists</span></a></li><li class=menu__item><a class=menu__link href=/links/home><span class=menu__text>Useful Links</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Getting Started with OpenTelemetry</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0a14 14 0 110 28 1 1 0 010-28m0 3a3 3 0 100 22 3 3 0 000-22m1 4h-2v8.4l6.8 4.4L22 18l-6-3.8z"/></svg><time class=meta__text datetime=2020-11-07T08:25:04+05:30>Nov 7 2020</time></div></div></header><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#what-is-opentelemetry>What is OpenTelemetry?</a><ul><li><a href=#opentelemetry-for-net>OpenTelemetry for .NET</a></li><li><a href=#useful-references>Useful References,</a></li></ul></li></ul></nav></div></div><div class="content post__content clearfix"><h2 id=background>Background</h2><p>How many times have we landed up in a meeting staring at random slowness or such production issues in a distributed Application ? only to experience helplessness with limited (or often times no) visibility available about the runtime behavior of the Application. It often ends up in manually correlating whatever diagnostic data available from Application and combining it with trace/logs that are available from O/S, databases etc. and trying to figure out &ldquo;Root cause&rdquo; of the issue.</p><p>Today’s mission critical, distributed applications and systems make it even more important to <strong>observe</strong> them, be it serving web requests, processing stream of data or handling events. The scale at which these applications/systems operate at, often hundreds or thousands of requests, requires <strong>watching</strong> how well system is working, instead of waiting for failure or doing analysis post failure.</p><p>In distributed systems, telemetry can be divided into three overarching flavors:</p><ul><li><strong>(Distributed) Traces</strong>: detailed records of the paths that distinct requests take as they propagate across an entire system (including across service boundaries)</li><li><strong>Metrics</strong>: aggregate statistics (mostly counters and gauges) about processes and infrastructure, typically with key:value tags attached to disaggregate patterns</li><li><strong>Logs</strong>: timestamped messages – sometimes structured – emitted by services or other components (though, unlike traces, not necessarily associated with any particular user request or transaction)</li></ul><p>To this effect, Cloud Native Computing Foundation (<a href=https://cncf.io target=_blank rel="noopener noreferrer">CNCF</a>) has been working on Opentelemetry.</p><h2 id=what-is-opentelemetry>What is OpenTelemetry?</h2><blockquote><p>OpenTelemetry is a vendor-neutral standard for collecting telemetry data for applications, their supporting infrastructures, and services.</p></blockquote><p>For deep dive, history etc., refer to Overview <a href=https://github.com/open-telemetry/opentelemetry-specification/blob/master/specification/logs/overview.md target=_blank rel="noopener noreferrer">here</a>.</p><p>So is this standard already available? As of this writing, it is about to go <strong>GA</strong> soon. This makes it more important to be aware of its scope (subjected to change). Let&rsquo;s see how it is proposing to address/implement Observability.</p><p>Below diagram depicts what OpenTelemetry does in Nutshell (Source: <a href=https://opentelmetry.io target=_blank rel="noopener noreferrer">Opentelemetry.io</a>),</p><figure><img src=https://raw.github.com/open-telemetry/opentelemetry.io/main/iconography/Reference_Architecture.svg><figcaption><h4>OpenTelemetry in Nutshell</h4></figcaption></figure><p>The general process of using OpenTelemetry is,</p><ul><li>Instrumentation of Application Code (including libraries)</li><li>Validate Instrumentation by sending it to Collector like Jaeger (For simplicity, we will only be using Console exporter)</li><li>Learn how Instrumentation helps in correlating, watching runtime behavior</li></ul><p>While vendors, having back-end systems, are providing or working on integrations with OpenTelemetry. The OpenTelemetry team has provided client libraries for Instrumentation in Go, .NET, Java,JavaScript, Python (and more coming). So lets us see what these libraries offer as of today by implementing .NET library.</p><p>In this post, We will look at how Opentelemetry helps us with &ldquo;Distributed tracing&rdquo;.</p><h3 id=opentelemetry-for-net>OpenTelemetry for .NET</h3><p><a href=https://dot.net target=_blank rel="noopener noreferrer">.NET</a> client of OpenTelemetry supports both <a href=https://dotnet.microsoft.com/download/dotnet-framework target=_blank rel="noopener noreferrer">.NET Framework</a> as well as <a href=https://dotnet.microsoft.com/download/dotnet-core target=_blank rel="noopener noreferrer">.NET Core</a>.</p><p>For list of available instrumentation libraries and exporters, refer <a href=https://github.com/open-telemetry/opentelemetry-dotnet target=_blank rel="noopener noreferrer">here</a></p><p>In the below sections, We will try to simulate a scenario, which is typical in Microservices style of Architecture, where service invokes another service using HTTP. Now, aim is to verify how using OpenTelemetry will help in watching traffic between these two services.</p><figure><img src=/images/ot_scenario.svg><figcaption><h4>Sample Scenario</h4></figcaption></figure><p>Lets start,</p><ul><li><p>Create Web Service (I am using .NET Core SDK 3.1.300 on Windows)</p><ul><li><p>Use <code>dotnet new webapi</code> to scaffold a REST API</p></li><li><p>Add references to below packages using Nuget,</p><ul><li><code>OpenTelemetry.Exporter.Console</code> - Exporter package to output telemetry to Console</li><li><code>OpenTelemetry.Instrumentation.AspNetCore</code> - Package that transparently instruments ASP.NET Core request processing pipeline</li><li><code>OpenTelemetry.Instrumentation.Http</code> - Package that transparently instruments HTTP Communication.</li></ul></li><li><p><code>Startup.cs</code> - It configures OpenTelemetry instrumentation with Console Exporter and instrumentation for HTTP requests. Below is ConfigServices function of Startup class.</p><pre><code>  public void ConfigureServices(IServiceCollection services)
  {
      services.AddOpenTelemetryTracing(
              (builder) =&gt; builder.AddAspNetCoreInstrumentation(opt =&gt; opt.Enrich
                      = (activity, eventName, rawObject) =&gt;
                  {
                      if (eventName.Equals(&quot;OnStartActivity&quot;))
                      {
                          if (rawObject is HttpRequest httpRequest)
                          {
                              activity.SetTag(&quot;requestProtocol&quot;, httpRequest.Protocol);
                          }
                      }
                      else if (eventName.Equals(&quot;OnStopActivity&quot;))
                      {
                          if (rawObject is HttpResponse httpResponse)
                          {
                              activity.SetTag(&quot;responseLength&quot;, httpResponse.ContentLength);
                          }
                      }
                  })
                  .AddHttpClientInstrumentation()
                  .AddConsoleExporter()   //opt =&gt; opt.DisplayAsJson = true)
          );

  }
</code></pre></li><li><p><code>WeatherForecastController.cs</code> - This is default controller added by <code>dotnet new webapi</code> command. We will add <code>GET</code> endpoint to simulate a dummy HTTP Request. This is to verify telemetry produced for the same.</p><div class="goat svg-container"><svg font-family="Menlo,Lucida Console,monospace" viewBox="0 0 848 265"><g transform="translate(8,16)"><path d="M28 56l8-16" fill="none" stroke="currentcolor"/><path d="M32 64l8-16" fill="none" stroke="currentcolor"/><path d="M32 80l8-16" fill="none" stroke="currentcolor"/><path d="M32 96l8-16" fill="none" stroke="currentcolor"/><polygon points="44.000000,96.000000 32.000000,90.400002 32.000000,101.599998" fill="currentcolor" transform="rotate(120.000000, 32.000000, 96.000000)"/><text text-anchor="middle" x="0" y="4" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="0" y="20" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="0" y="36" fill="currentcolor" style="font-size:1em">{</text><text text-anchor="middle" x="0" y="244" fill="currentcolor" style="font-size:1em">}</text><text text-anchor="middle" x="8" y="4" fill="currentcolor" style="font-size:1em">H</text><text text-anchor="middle" x="8" y="20" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="16" y="4" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="16" y="20" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="24" y="4" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="24" y="20" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="32" y="4" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="32" y="20" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="32" y="116" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="32" y="132" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="32" y="148" fill="currentcolor" style="font-size:1em">{</text><text text-anchor="middle" x="32" y="212" fill="currentcolor" style="font-size:1em">}</text><text text-anchor="middle" x="32" y="228" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="40" y="4" fill="currentcolor" style="font-size:1em">G</text><text text-anchor="middle" x="40" y="20" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="40" y="100" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="40" y="116" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="40" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="40" y="212" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="40" y="228" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="48" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="48" y="100" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="48" y="116" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="48" y="132" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="48" y="228" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="56" y="4" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="56" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="56" y="52" fill="currentcolor" style="font-size:1em">M</text><text text-anchor="middle" x="56" y="68" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="56" y="84" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="56" y="132" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="56" y="228" fill="currentcolor" style="font-size:1em">A</text><text text-anchor="middle" x="64" y="4" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="64" y="20" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="64" y="52" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="64" y="68" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="64" y="84" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="64" y="100" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="64" y="116" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="64" y="132" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="64" y="164" fill="currentcolor" style="font-size:1em">D</text><text text-anchor="middle" x="64" y="180" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="64" y="196" fill="currentcolor" style="font-size:1em">S</text><text text-anchor="middle" x="64" y="228" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="72" y="4" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="72" y="20" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="72" y="52" fill="currentcolor" style="font-size:1em">k</text><text text-anchor="middle" x="72" y="68" fill="currentcolor" style="font-size:1em">w</text><text text-anchor="middle" x="72" y="84" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="72" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="72" y="116" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="72" y="132" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="72" y="164" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="72" y="180" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="72" y="196" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="72" y="228" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="80" y="4" fill="currentcolor" style="font-size:1em">{</text><text text-anchor="middle" x="80" y="20" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="80" y="52" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="80" y="84" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="80" y="100" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="80" y="116" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="80" y="164" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="80" y="180" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="80" y="196" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="80" y="228" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="88" y="4" fill="currentcolor" style="font-size:1em">k</text><text text-anchor="middle" x="88" y="20" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="88" y="52" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="88" y="68" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="88" y="84" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="88" y="132" fill="currentcolor" style="font-size:1em">E</text><text text-anchor="middle" x="88" y="164" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="88" y="180" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="88" y="196" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="88" y="228" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="96" y="4" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="96" y="52" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="96" y="68" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="96" y="84" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="96" y="100" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="96" y="116" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="96" y="132" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="96" y="180" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="96" y="196" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="96" y="228" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="104" y="4" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="104" y="20" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="104" y="68" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="104" y="84" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="104" y="132" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="104" y="164" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="104" y="180" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="104" y="196" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="104" y="228" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="112" y="4" fill="currentcolor" style="font-size:1em">}</text><text text-anchor="middle" x="112" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="112" y="52" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="112" y="68" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="112" y="84" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="112" y="100" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="112" y="116" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="112" y="132" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="112" y="180" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="112" y="196" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="112" y="228" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="120" y="4" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="120" y="20" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="120" y="52" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="120" y="68" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="120" y="84" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="120" y="100" fill="currentcolor" style="font-size:1em">w</text><text text-anchor="middle" x="120" y="116" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="120" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="120" y="164" fill="currentcolor" style="font-size:1em">D</text><text text-anchor="middle" x="120" y="180" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="128" y="4" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="128" y="20" fill="currentcolor" style="font-size:1em">k</text><text text-anchor="middle" x="128" y="68" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="128" y="84" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="128" y="100" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="128" y="116" fill="currentcolor" style="font-size:1em">w</text><text text-anchor="middle" x="128" y="132" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="128" y="164" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="128" y="180" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="128" y="196" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="136" y="4" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="136" y="20" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="136" y="52" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="136" y="68" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="136" y="84" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="136" y="100" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="136" y="132" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="136" y="164" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="136" y="180" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="144" y="20" fill="currentcolor" style="font-size:1em">I</text><text text-anchor="middle" x="144" y="52" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="144" y="68" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="144" y="84" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="144" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="144" y="116" fill="currentcolor" style="font-size:1em">R</text><text text-anchor="middle" x="144" y="132" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="144" y="164" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="144" y="180" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="144" y="196" fill="currentcolor" style="font-size:1em">S</text><text text-anchor="middle" x="152" y="20" fill="currentcolor" style="font-size:1em">E</text><text text-anchor="middle" x="152" y="52" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="152" y="68" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="152" y="84" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="152" y="116" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="152" y="132" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="152" y="164" fill="currentcolor" style="font-size:1em">T</text><text text-anchor="middle" x="152" y="180" fill="currentcolor" style="font-size:1em">C</text><text text-anchor="middle" x="152" y="196" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="160" y="20" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="160" y="52" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="160" y="68" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="160" y="100" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="160" y="116" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="160" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="160" y="164" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="160" y="196" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="168" y="20" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="168" y="84" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="168" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="168" y="116" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="168" y="132" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="168" y="164" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="168" y="180" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="168" y="196" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="176" y="20" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="176" y="52" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="176" y="68" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="176" y="84" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="176" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="176" y="116" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="176" y="132" fill="currentcolor" style="font-size:1em">R</text><text text-anchor="middle" x="176" y="164" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="176" y="196" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="184" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="184" y="52" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="184" y="68" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="184" y="100" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="184" y="116" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="184" y="132" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="184" y="164" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="184" y="180" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="184" y="196" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="192" y="20" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="192" y="52" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="192" y="68" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="192" y="84" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="192" y="100" fill="currentcolor" style="font-size:1em">C</text><text text-anchor="middle" x="192" y="116" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="192" y="132" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="192" y="164" fill="currentcolor" style="font-size:1em">N</text><text text-anchor="middle" x="192" y="180" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="192" y="196" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="200" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="200" y="52" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="200" y="68" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="200" y="84" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="200" y="100" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="200" y="116" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="200" y="132" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="200" y="164" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="200" y="180" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="200" y="196" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="208" y="20" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="208" y="68" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="208" y="84" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="208" y="100" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="208" y="116" fill="currentcolor" style="font-size:1em">;</text><text text-anchor="middle" x="208" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="208" y="164" fill="currentcolor" style="font-size:1em">w</text><text text-anchor="middle" x="208" y="180" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="208" y="196" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="216" y="20" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="216" y="52" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="216" y="84" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="216" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="216" y="132" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="216" y="164" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="216" y="180" fill="currentcolor" style="font-size:1em">N</text><text text-anchor="middle" x="216" y="196" fill="currentcolor" style="font-size:1em">[</text><text text-anchor="middle" x="224" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="224" y="52" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="224" y="68" fill="currentcolor" style="font-size:1em">w</text><text text-anchor="middle" x="224" y="84" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="224" y="100" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="224" y="132" fill="currentcolor" style="font-size:1em">1</text><text text-anchor="middle" x="224" y="164" fill="currentcolor" style="font-size:1em">A</text><text text-anchor="middle" x="224" y="180" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="224" y="196" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="232" y="20" fill="currentcolor" style="font-size:1em">&lt;</text><text text-anchor="middle" x="232" y="52" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="232" y="68" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="232" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="232" y="132" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="232" y="164" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="232" y="180" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="232" y="196" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="240" y="20" fill="currentcolor" style="font-size:1em">W</text><text text-anchor="middle" x="240" y="52" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="240" y="68" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="240" y="84" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="240" y="100" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="240" y="164" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="240" y="180" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="240" y="196" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="248" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="248" y="68" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="248" y="84" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="248" y="100" fill="currentcolor" style="font-size:1em">G</text><text text-anchor="middle" x="248" y="132" fill="currentcolor" style="font-size:1em">5</text><text text-anchor="middle" x="248" y="164" fill="currentcolor" style="font-size:1em">D</text><text text-anchor="middle" x="248" y="180" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="248" y="196" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="256" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="256" y="52" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="256" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="256" y="132" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="256" y="164" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="256" y="180" fill="currentcolor" style="font-size:1em">-</text><text text-anchor="middle" x="256" y="196" fill="currentcolor" style="font-size:1em">N</text><text text-anchor="middle" x="264" y="20" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="264" y="52" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="264" y="68" fill="currentcolor" style="font-size:1em">b</text><text text-anchor="middle" x="264" y="84" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="264" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="264" y="132" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="264" y="164" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="264" y="180" fill="currentcolor" style="font-size:1em">2</text><text text-anchor="middle" x="264" y="196" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="272" y="20" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="272" y="68" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="272" y="84" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="272" y="100" fill="currentcolor" style="font-size:1em">S</text><text text-anchor="middle" x="272" y="132" fill="currentcolor" style="font-size:1em">S</text><text text-anchor="middle" x="272" y="164" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="272" y="180" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="272" y="196" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="280" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="280" y="52" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="280" y="84" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="280" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="280" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="280" y="164" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="280" y="180" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="280" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="288" y="20" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="288" y="52" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="288" y="68" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="288" y="84" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="288" y="100" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="288" y="132" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="288" y="164" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="288" y="196" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="296" y="20" fill="currentcolor" style="font-size:1em">F</text><text text-anchor="middle" x="296" y="52" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="296" y="68" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="296" y="84" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="296" y="100" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="296" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="296" y="164" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="296" y="180" fill="currentcolor" style="font-size:1em">5</text><text text-anchor="middle" x="296" y="196" fill="currentcolor" style="font-size:1em">S</text><text text-anchor="middle" x="304" y="20" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="304" y="52" fill="currentcolor" style="font-size:1em">v</text><text text-anchor="middle" x="304" y="68" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="304" y="84" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="304" y="100" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="304" y="132" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="304" y="164" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="304" y="180" fill="currentcolor" style="font-size:1em">5</text><text text-anchor="middle" x="304" y="196" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="312" y="20" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="312" y="52" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="312" y="68" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="312" y="84" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="312" y="100" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="312" y="132" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="312" y="164" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="312" y="180" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="312" y="196" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="320" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="320" y="68" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="320" y="84" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="320" y="100" fill="currentcolor" style="font-size:1em">A</text><text text-anchor="middle" x="320" y="132" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="320" y="164" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="320" y="180" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="320" y="196" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="328" y="20" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="328" y="52" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="328" y="68" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="328" y="100" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="328" y="132" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="328" y="164" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="328" y="196" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="336" y="20" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="336" y="52" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="336" y="68" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="336" y="84" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="336" y="100" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="336" y="132" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="336" y="164" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="336" y="196" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="344" y="20" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="344" y="68" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="344" y="84" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="344" y="100" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="344" y="132" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="344" y="196" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="352" y="20" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="352" y="52" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="352" y="84" fill="currentcolor" style="font-size:1em">q</text><text text-anchor="middle" x="352" y="100" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="352" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="352" y="196" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="360" y="20" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="360" y="52" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="360" y="68" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="360" y="84" fill="currentcolor" style="font-size:1em">u</text><text text-anchor="middle" x="360" y="100" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="360" y="132" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="360" y="196" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="368" y="20" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="368" y="68" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="368" y="84" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="368" y="100" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="368" y="196" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="376" y="52" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="376" y="68" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="376" y="84" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="376" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="376" y="132" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="376" y="196" fill="currentcolor" style="font-size:1em">L</text><text text-anchor="middle" x="384" y="20" fill="currentcolor" style="font-size:1em">G</text><text text-anchor="middle" x="384" y="52" fill="currentcolor" style="font-size:1em">x</text><text text-anchor="middle" x="384" y="84" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="384" y="100" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="384" y="132" fill="currentcolor" style="font-size:1em">></text><text text-anchor="middle" x="384" y="196" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="392" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="392" y="52" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="392" y="68" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="392" y="84" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="392" y="100" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="392" y="196" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="400" y="20" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="400" y="52" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="400" y="68" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="400" y="100" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="400" y="132" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="400" y="196" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="408" y="20" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="408" y="52" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="408" y="68" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="408" y="100" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="408" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="408" y="196" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="416" y="20" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="416" y="52" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="416" y="68" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="416" y="100" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="416" y="132" fill="currentcolor" style="font-size:1em">w</text><text text-anchor="middle" x="416" y="196" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="424" y="20" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="424" y="52" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="424" y="68" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="424" y="100" fill="currentcolor" style="font-size:1em">F</text><text text-anchor="middle" x="424" y="196" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="432" y="20" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="432" y="68" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="432" y="100" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="432" y="132" fill="currentcolor" style="font-size:1em">W</text><text text-anchor="middle" x="432" y="196" fill="currentcolor" style="font-size:1em">]</text><text text-anchor="middle" x="440" y="20" fill="currentcolor" style="font-size:1em">i</text><text text-anchor="middle" x="440" y="52" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="440" y="68" fill="currentcolor" style="font-size:1em">d</text><text text-anchor="middle" x="440" y="100" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="440" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="440" y="196" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="448" y="20" fill="currentcolor" style="font-size:1em">n</text><text text-anchor="middle" x="448" y="52" fill="currentcolor" style="font-size:1em">f</text><text text-anchor="middle" x="448" y="100" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="448" y="132" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="456" y="20" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="456" y="100" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="456" y="132" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="464" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="464" y="132" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="472" y="20" fill="currentcolor" style="font-size:1em">k</text><text text-anchor="middle" x="472" y="100" fill="currentcolor" style="font-size:1em">(</text><text text-anchor="middle" x="472" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="480" y="20" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="480" y="100" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="480" y="132" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="488" y="20" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="488" y="100" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="488" y="132" fill="currentcolor" style="font-size:1em">F</text><text text-anchor="middle" x="496" y="20" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="496" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="496" y="132" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="504" y="100" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="504" y="132" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="512" y="100" fill="currentcolor" style="font-size:1em">p</text><text text-anchor="middle" x="512" y="132" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="520" y="100" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="520" y="132" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="528" y="100" fill="currentcolor" style="font-size:1em">:</text><text text-anchor="middle" x="528" y="132" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="536" y="100" fill="currentcolor" style="font-size:1em">/</text><text text-anchor="middle" x="536" y="132" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="544" y="100" fill="currentcolor" style="font-size:1em">/</text><text text-anchor="middle" x="544" y="132" fill="currentcolor" style="font-size:1em">t</text><text text-anchor="middle" x="552" y="100" fill="currentcolor" style="font-size:1em">w</text><text text-anchor="middle" x="560" y="100" fill="currentcolor" style="font-size:1em">w</text><text text-anchor="middle" x="568" y="100" fill="currentcolor" style="font-size:1em">w</text><text text-anchor="middle" x="576" y="100" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="584" y="100" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="592" y="100" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="600" y="100" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="608" y="100" fill="currentcolor" style="font-size:1em">g</text><text text-anchor="middle" x="616" y="100" fill="currentcolor" style="font-size:1em">l</text><text text-anchor="middle" x="624" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="632" y="100" fill="currentcolor" style="font-size:1em">.</text><text text-anchor="middle" x="640" y="100" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="648" y="100" fill="currentcolor" style="font-size:1em">o</text><text text-anchor="middle" x="656" y="100" fill="currentcolor" style="font-size:1em">m</text><text text-anchor="middle" x="664" y="100" fill="currentcolor" style="font-size:1em">/</text><text text-anchor="middle" x="672" y="100" fill="currentcolor" style="font-size:1em">s</text><text text-anchor="middle" x="680" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="688" y="100" fill="currentcolor" style="font-size:1em">a</text><text text-anchor="middle" x="696" y="100" fill="currentcolor" style="font-size:1em">r</text><text text-anchor="middle" x="704" y="100" fill="currentcolor" style="font-size:1em">c</text><text text-anchor="middle" x="712" y="100" fill="currentcolor" style="font-size:1em">h</text><text text-anchor="middle" x="720" y="100" fill="currentcolor" style="font-size:1em">?</text><text text-anchor="middle" x="728" y="100" fill="currentcolor" style="font-size:1em">q</text><text text-anchor="middle" x="736" y="100" fill="currentcolor" style="font-size:1em">=</text><text text-anchor="middle" x="744" y="100" fill="currentcolor" style="font-size:1em">{</text><text text-anchor="middle" x="752" y="100" fill="currentcolor" style="font-size:1em">0</text><text text-anchor="middle" x="760" y="100" fill="currentcolor" style="font-size:1em">}</text><text text-anchor="middle" x="768" y="100" fill="currentcolor" style="font-size:1em">"</text><text text-anchor="middle" x="776" y="100" fill="currentcolor" style="font-size:1em">,</text><text text-anchor="middle" x="792" y="100" fill="currentcolor" style="font-size:1em">k</text><text text-anchor="middle" x="800" y="100" fill="currentcolor" style="font-size:1em">e</text><text text-anchor="middle" x="808" y="100" fill="currentcolor" style="font-size:1em">y</text><text text-anchor="middle" x="816" y="100" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="824" y="100" fill="currentcolor" style="font-size:1em">)</text><text text-anchor="middle" x="832" y="100" fill="currentcolor" style="font-size:1em">;</text></g></svg></div></li></ul></li><li><p>Lets create a Service 1
For the sake of simplicity, we will have &ldquo;Service 1&rdquo; implemented as Console Application,</p><ul><li><p>Use <code>dotnet new console</code> to create new App.</p></li><li><p>Add reference to &ldquo;OpenTelemetry.Exporter.Console&rdquo; using <code>dotnet add OpenTelemetry.Exporter.Console -version 0.7.0-beta.1</code>. This package is specifically meant for exporting telemetry to Console. There are other exporters available to export to Jaegar, Zipkin etc. but this is simplest one to setup.</p></li><li><p>Add reference to &ldquo;OpenTelemetry.Instrumentation.Http&rdquo; using <code>dotnet add OpenTelemetry.Instrumentation.Http -version 0.7.0-beta.1</code>. This package helps in instrumenting HTTP requests.</p></li><li><p>Add below code to <code>program.cs</code>,</p><p>static async Task Main(string[] args)
{
// Configure OpenTelemetry Tracer with Console exported and initiate it
Sdk.CreateTracerProviderBuilder()
.AddHttpClientInstrumentation()
.AddConsoleExporter()
.Build();</p><pre><code>          try
          {
              // Simulate HTTP Request to our service
              string responseBody = await client.GetStringAsync(&quot;https://localhost:5001/weatherforecast/abc&quot;);

              Console.WriteLine(responseBody);

          }
          catch (HttpRequestException e)
          {
              Console.WriteLine(&quot;\nException Caught!&quot;);
              Console.WriteLine(&quot;Message :{0} &quot;, e.Message);
          }

          Console.WriteLine(&quot;Done!&quot;);
      }
</code></pre></li></ul><p>In this class, we have configured OpenTelemetry tracer with Console Exported and intialized it. Further, HTTP requests are automatically instrumented since we have added <code>OpenTelemetry.Instrumentation.Http</code> package.</p></li><li><p>Observe the Telemetry,</p><ul><li>Start the Web Service. Check that it is listening on port <code>8080</code> by visiting <code>https://localhost:8080</code>. Note: you may have to install Client certificate to enable SSL.</li><li>Start the Console Application. This application will send HTTP request to the service.</li><li>Observe the telemetry produced by,<ul><li><p>Console Application,</p><figure><img src=/images/ot_client.png><figcaption><h4>Default Telemetry generated</h4></figcaption></figure><ul><li>Activity Id (GUID) is generated for a Span (Refer <a href=https://github.com/open-telemetry/opentelemetry-specification/blob/master/specification/overview.md#trace target=_blank rel="noopener noreferrer">here</a> for details on what span means)</li><li>It also records start and end time</li></ul></li><li><p>Web Service,<figure><img src=/images/ot_service.png><figcaption><h4>Default Telemetry</h4></figcaption></figure></p></li><li><p>Observations</p><ul><li>Check Activity ID being shown is same as one reported by Console Application. So correlation has been established across process boundaries. This is important when tracing end to end across processes. This is achieved by means of passing Activity ID as HTTP Header. In a Visualization tool, this correlation is used to depict end to end flow with time at each step.</li><li>By default, it logs start and end time. For any HTTP request, it generates additional telemetry covering URL to which request was sent and start and end time.</li></ul></li></ul></li></ul></li></ul><p>In Summary, this default telemetry can obviously be enhanced by adding Tags. When coupled with additional telemetry in the form of metering (to statistically observe behavior of high traffic, large scale system) and telemetry from Infrastructure (i.e. OS) and other Systems (e.g. Databases), it truly provides complete view of proceedings end to end.</p><p>Hope this provides overview of instrumentation as provided by OpenTelemetry. Let me know if you have any questions or suggestions in Comments section below.</p><p>Instrumenting .NET framework based Apps for same scenario is similar to above, refer folder <code>Opentelemetry</code> in repository <a href=https://github.com/sachinsu/opentelemetrydotnet target=_blank rel="noopener noreferrer">here</a></p><h3 id=useful-references>Useful References,</h3><ul><li><a href=https://bit.kevinslin.com/p/opentelemetry-in-2023 target=_blank rel="noopener noreferrer">OpenTelemetry in 2023</a></li><li><a href=https://devblogs.microsoft.com/dotnet/opentelemetry-net-reaches-v1-0/ target=_blank rel="noopener noreferrer">OpenTelemetry in .NET</a></li><li><a href="https://www.youtube.com/watch?v=r8UvWSX3KA8" target=_blank rel="noopener noreferrer">Short course on OpenTelemetry</a>)</li></ul><p>Happy Coding !!</p><hr><script src=https://utteranc.es/client.js repo=sachinsu/sachinsu.github.io issue-term=title label=blogcomment theme=github-light crossorigin=anonymous async></script></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M4 0h8s2 0 4 2l15 15s2 2 0 4L21 31s-2 2-4 0L2 16s-2-2-2-4V3s0-3 4-3m3 10a3 3 0 000-6 3 3 0 000 6"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/.net-core/ rel=tag>.net core</a></li><li class=tags__item><a class="tags__link btn" href=/tags/.net-framework/ rel=tag>.net framework</a></li><li class=tags__item><a class="tags__link btn" href=/tags/opentelemetry/ rel=tag>OpenTelemetry</a></li><li class=tags__item><a class="tags__link btn" href=/tags/observability/ rel=tag>Observability</a></li><li class=tags__item><a class="tags__link btn" href=/tags/go/ rel=tag>Go</a></li><li class=tags__item><a class="tags__link btn" href=/tags/golang/ rel=tag>Golang</a></li></ul></div></footer></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/posts/ninjabuildsystem/ rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Ninja - Using lightweight build system for Go projects</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/posts/temporalworkflow/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Using Temporal.io to build Long running Workflows</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2025 Sachin Sunkle.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>